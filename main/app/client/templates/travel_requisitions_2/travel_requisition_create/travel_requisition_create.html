<template name="TravelRequisition2Create">
    <div class="modal fade add-unit" tabindex="-1" role="dialog" data-backdrop="static">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">New Travel Request</h3>
                    </div>
                    <div class="panel-body">
                        {{#unless Template.subscriptionsReady}}
                        <div class="row">
                            <div class="col-sm-12">
                                {{> spinner}}
                            </div>
                        </div>
                        {{/unless}}
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label for="description" class="control-label">Description <span class="asterisk important-input">*</span></label>
                                    <input type="text" id="description" class="form-control" placeholder="Description" name="description" value="{{currentTravelRequest.description}}" />
                                </div><!-- form-group -->
                            </div><!-- col-sm-3 -->
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">

                                    <label for="budget-code" class="control-label">Which project will be responsible for this trip?</label>
                                    {{#semanticselect}}
                                    <select id="budget-code" name="budget-code" style="width: 100%" class="ui fluid search dropdown form-control">
                                        <option value="NONE">I am not sure</option>
                                        {{#each budgetList}}
                                        <option value="{{_id}}" {{budgetCodeSelected _id}}>{{name}}</option>
                                        {{/each}}
                                    </select>
                                    {{/semanticselect}}
                                    <span class="text-warning"><small>Try your best to provide this info. But if you are not sure, then leave it blank</small></span>
                                </div><!-- form-group -->
                            </div><!-- col-sm-3 -->

                        </div>

                        <div class="row">
                            <div class="col-sm-10">
                                <div class="form-group">
                                    <ul class="list-inline">
                                        <li><input type="radio" value="Return" name="travelType" {{travelTypeChecked "Return"}}/>&nbsp;&nbsp;Return Trip</li>
                                        <li><input type="radio"  value="Multiple" name="travelType" {{travelTypeChecked "Multiple"}}/>&nbsp;&nbsp;Multiple Trips</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col-sm-2">
                                <button class="btn btn-danger btn-small mr5 pull-right" id="startProcessing">Reset All</button>
                            </div>
                        </div>

                        <hr/>

                        {{#each currentTravelRequest.trips}}
                        <div class="row">
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <label for="fromId_{{this.tripIndex}}" class="control-label">From</label>
                                    {{#semanticselect}}
                                    <select id="fromId_{{this.tripIndex}}" name="fromId_{{this.tripIndex}}" style="width: 100%"  class="ui fluid search dropdown form-control" data-live-search="true" >
                                        <option value="None" >None</option>
                                        {{#each travelcityList}}
                                        <option value="{{_id}}" {{fromIdSelected _id ../tripIndex}}>{{name}}</option>
                                        {{/each}}
                                    </select>
                                    {{/semanticselect}}
                                </div><!-- form-group -->
                            </div><!-- col-sm-6 -->
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <label for="toId_{{this.tripIndex}}" class="control-label">To</label>
                                    {{#semanticselect}}
                                    <select id="toId_{{this.tripIndex}}" name="toId_{{this.tripIndex}}" style="width: 100%" class="ui fluid search dropdown form-control">
                                        <option value="None" >None</option>
                                        {{#each travelcityList}}
                                        <option value="{{_id}}" {{toIdSelected _id ../tripIndex}}>{{name}}</option>
                                        {{/each}}
                                    </select>
                                    {{/semanticselect}}
                                </div><!-- form-group -->
                            </div><!-- col-sm-6 -->
                            <div class="col-sm-2">
                                <div class="form-group datetimepicker">
                                    <label class="control-label">Departure<span class="asterisk important-input">*</span></label>
                                    <input class="set-due-date form-control " type="text" id="departureDate_{{this.tripIndex}}" name="departureDate_{{this.tripIndex}}" placeholder="Departure Date" value="{{formatDate this.departureDate}}"/>
                                </div>
                            </div>
                            <div class="col-sm-1">
                                <div class="form-group">

                                    <label for="departureTime_{{this.tripIndex}}" class="control-label">Time <span class="asterisk important-input">*</span></label>
                                    {{#semanticselect}}
                                    <select name="departureTime_{{this.tripIndex}}" id="departureTime_{{this.tripIndex}}" style="width: 100%" class="form-control">
                                        <option value="1">6 AM</option>
                                        <option value="2">7 AM</option>
                                        <option value="3">8 AM</option>
                                        <option value="4">9 AM</option>
                                        <option value="5">10 AM</option>
                                        <option value="6">11 AM</option>
                                        <option value="7">12 PM</option>
                                        <option value="8">1 PM</option>
                                        <option value="9">2 PM</option>
                                        <option value="10">3 PM</option>
                                        <option value="11">4 PM</option>
                                        <option value="12">5 PM</option>
                                        <option value="13">6 PM</option>
                                        <option value="14">7 PM</option>
                                        <option value="15">8 PM</option>
                                        <option value="16">9 PM</option>
                                        <option value="17">10 PM</option>
                                        <option value="18">11 PM</option>
                                        <option value="19">1 AM</option>
                                        <option value="20">2 AM</option>
                                        <option value="21">3 AM</option>
                                        <option value="22">4 AM</option>
                                        <option value="23">5 AM</option>
                                    </select>
                                    {{/semanticselect}}
                                </div><!-- form-group -->
                            </div>
                            {{#if isReturnTrip}}
                            <div class="col-sm-2">
                                <div class="form-group datetimepicker">
                                    <label class="control-label">Return <span class="asterisk important-input">*</span></label>
                                    <input class="set-due-date form-control " type="text" id="returnDate_{{this.tripIndex}}" name="returnDate_{{this.tripIndex}}" placeholder="Return Date" value="{{formatDate this.returnDate}}"/>
                                </div>
                            </div>
                            <div class="col-sm-1">
                                <div class="form-group">

                                    <label for="returnTime_{{this.tripIndex}}" class="control-label">Time <span class="asterisk important-input">*</span></label>
                                    <select id="returnTime_{{this.tripIndex}}" name="returnTime_{{this.tripIndex}}" style="width: 100%" class="form-control ">
                                        <option value="1">6 AM</option>
                                        <option value="2">7 AM</option>
                                        <option value="3">8 AM</option>
                                        <option value="4">9 AM</option>
                                        <option value="5">10 AM</option>
                                        <option value="6">11 AM</option>
                                        <option value="7">12 PM</option>
                                        <option value="8">1 PM</option>
                                        <option value="9">2 PM</option>
                                        <option value="10">3 PM</option>
                                        <option value="11">4 PM</option>
                                        <option value="12">5 PM</option>
                                        <option value="13">6 PM</option>
                                        <option value="14">7 PM</option>
                                        <option value="15">8 PM</option>
                                        <option value="16">9 PM</option>
                                        <option value="17">10 PM</option>
                                        <option value="18">11 PM</option>
                                        <option value="19">1 AM</option>
                                        <option value="20">2 AM</option>
                                        <option value="21">3 AM</option>
                                        <option value="22">4 AM</option>
                                        <option value="23">5 AM</option>
                                    </select>
                                </div><!-- form-group -->
                            </div><!-- col-sm-12 -->
                            {{/if}}
                        </div>
                        {{#unless isLastLeg this.tripIndex}}
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">

                                    <label for="airlineId_{{this.tripIndex}}" class="control-label">Airline <span class="asterisk important-input">*</span></label>
                                    {{#semanticselect}}
                                    <select id="airlineId_{{this.tripIndex}}" name="airlineId_{{this.tripIndex}}" style="width: 100%" class="ui fluid search dropdown form-control">
                                        <option value="None">None</option>
                                        {{#each airlineList this.fromId this.toId}}
                                        <option value="{{airlineId}}" {{airlineSelected airlineId ../tripIndex}}>{{getAirlineName airlineId}}</option>
                                        {{/each}}
                                    </select>
                                    {{/semanticselect}}
                                </div><!-- form-group -->
                            </div><!-- col-sm-3 -->
                            <div class="col-sm-2">
                                <div class="form-group">
                                    <label for="airfareCost_{{this.tripIndex}}" class="control-label">Airfare Cost</label>
                                    <input type="text" id="airfareCost_{{this.tripIndex}}" class="form-control" name="airfareCost_{{this.tripIndex}}" value="{{this.airfareCost}}" disabled/>
                                </div><!-- form-group -->
                            </div><!-- col-sm-3 -->
                            <div class="col-sm-1">
                                <div class="form-group">
                                    <label for="airfareCurrency_{{this.tripIndex}}" class="control-label">Curr.</label>
                                    <input type="text" id="airfareCurrency_{{this.tripIndex}}" class="form-control" name="airfareCurrency_{{this.tripIndex}}" value="{{this.airfareCurrency}}" disabled/>
                                </div><!-- form-group -->
                            </div><!-- col-sm-3 -->
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="hotelId_{{this.tripIndex}}" class="control-label">Hotel <span class="asterisk important-input">*</span></label>
                                    {{#semanticselect}}
                                    <select id="hotelId_{{this.tripIndex}}" name="hotelId_{{this.tripIndex}}" style="width: 100%" class="ui fluid search dropdown form-control">
                                        <option value="None">None</option>
                                        {{#each hotelList this.toId}}
                                        <option value="{{_id}}" {{hotelSelected _id ../tripIndex}}>{{name}}</option>
                                        {{/each}}
                                    </select>
                                    {{/semanticselect}}
                                </div><!-- form-group -->
                            </div><!-- col-sm-3 -->
                            <div class="col-sm-2">
                                <div class="form-group">
                                    <label for="hotelRate_{{this.tripIndex}}" class="control-label">Rate per Night</label>
                                    <input type="text" id="hotelRate_{{this.tripIndex}}" class="form-control" name="hotelRate_{{this.tripIndex}}" value="{{this.hotelRate}}" disabled/>
                                </div><!-- form-group -->
                            </div><!-- col-sm-3 -->
                            <div class="col-sm-1">
                                <div class="form-group">
                                    <label for="hotelCurrency_{{this.tripIndex}}" class="control-label">Curr.</label>
                                    <input type="text" id="hotelCurrency_{{this.tripIndex}}" class="form-control" name="hotelCurrency_{{this.tripIndex}}" value="{{this.hotelCurrency}}" disabled/>
                                </div><!-- form-group -->
                            </div><!-- col-sm-3 -->
                            <div class="col-sm-3">
                                <label>&nbsp;</label>
                                <div class="ckbox ckbox-danger">
                                    <input type="checkbox" id="hotelNotRequired_{{this.tripIndex}}" name="hotelNotRequired_{{this.tripIndex}}" value="{{this.tripIndex}}" {{hotelNotRequiredChecked this.tripIndex}}/>
                                    <label for="hotelNotRequired_{{this.tripIndex}}">I do not need a hotel</label>
                                </div>
                            </div><!-- col-sm-4 -->
                        </div>
                        {{#unless hotelNotRequiredChecked this.tripIndex}}
                        <div class="row">
                            <div class="col-sm-4">
                                <label>Hotel Will Cover:</label>
                            </div>
                            <div class="col-sm-2">
                                <div class="ckbox ckbox-success">
                                    <input type="checkbox" id="isBreakfastIncluded_{{this.tripIndex}}" {{isBreakfastIncluded this.tripIndex}} />
                                    <label for="isBreakfastIncluded_{{this.tripIndex}}">Breakfast</label>
                                </div>
                            </div>
                            <div class="col-sm-2">
                                <div class="ckbox ckbox-success">
                                    <input type="checkbox" id="isLunchIncluded_{{this.tripIndex}}" {{isLunchIncluded this.tripIndex}} />
                                    <label for="isLunchIncluded_{{this.tripIndex}}">Lunch</label>
                                </div>
                            </div>
                            <div class="col-sm-2">
                                <div class="ckbox ckbox-success">
                                    <input type="checkbox" id="isDinnerIncluded_{{this.tripIndex}}" {{isDinnerIncluded this.tripIndex}} />
                                    <label for="isDinnerIncluded_{{this.tripIndex}}">Dinner</label>
                                </div>
                            </div>
                            <div class="col-sm-2">
                                <div class="ckbox ckbox-success">
                                    <input type="checkbox" id="isIncidentalsIncluded_{{this.tripIndex}}" {{isIncidentalsIncluded this.tripIndex}} />
                                    <label for="isIncidentalsIncluded_{{this.tripIndex}}">Incidentals</label>
                                </div>
                            </div>
                        </div>
                        {{/unless}}
                        <hr/>
                        <div class="row">
                            <div class="col-sm-3">
                                <span>Per Diem Rate: <strong>{{formatMoney this.perDiemCost this.perDiemCurrency}}</strong></span>
                            </div>
                            <div class="col-sm-3">
                                <span>Total Days/Nights: <strong>{{this.totalDuration}}</strong></span>
                            </div>
                            <div class="col-sm-3">
                                <span>Total Per Diem: <strong>{{formatMoney this.totalPerDiem this.perDiemCurrency}}</strong></span>
                            </div>
                            <div class="col-sm-3">
                                <span>Total Hotel: <strong>{{formatMoney this.totalHotelCost this.hotelCurrency}}</strong></span>
                            </div>

                        </div>
                        {{/unless}}
                        <hr/>
                        {{/each}}

                        <div class="row">
                            <div class="col-sm-12">
                                <span><strong>Trip Summary</strong></span>
                            </div>
                        </div>
                        <hr/>

                        <div class="row">
                            <div class="col-sm-8">
                                <span>Total Estimated Amount Payable to Employee:</span>
                            </div>
                            <div class="col-sm-2">
                                <span class="text-right pull-right">{{formatMoney currentTravelRequest.totalEmployeeAmountPayableNGN "NGN"}}</span>
                            </div>
                            <div class="col-sm-2">
                                <span class="text-right pull-right">{{formatMoney currentTravelRequest.totalEmployeeAmountPayableUSD "USD"}}</span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-8">
                                <span>Total Estimated Flight Cost:</span>
                            </div>
                            <div class="col-sm-2">
                                <span class="text-right pull-right">{{formatMoney currentTravelRequest.totalFlightCostNGN "NGN"}}</span>
                            </div>
                            <div class="col-sm-2">
                                <span class="text-right pull-right">{{formatMoney currentTravelRequest.totalFlightCostUSD "USD"}}</span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-8">
                                <span>Total Estimated Hotel Cost:</span>
                            </div>
                            <div class="col-sm-2">
                                <span class="text-right pull-right">{{formatMoney currentTravelRequest.totalHotelCostNGN "NGN"}}</span>
                            </div>
                            <div class="col-sm-2">
                                <span class="text-right pull-right">{{formatMoney currentTravelRequest.totalHotelCostUSD "USD"}}</span>
                            </div>
                        </div>

                        <hr>
                        <div class="row">
                            <div class="col-sm-8">
                                <span><strong>Total Estimated Trip Cost:</strong></span>
                            </div>
                            <div class="col-sm-2">
                                <span class="text-right pull-right"><strong>{{formatMoney currentTravelRequest.totalTripCostNGN "NGN"}}</strong></span>
                            </div>
                            <div class="col-sm-2">
                                <span class="text-right pull-right"><strong>{{formatMoney currentTravelRequest.totalTripCostUSD "USD"}}</strong></span>
                            </div>
                        </div>
                    </div>
                    <div class="panel-footer">
                        <button type="reset" class="btn btn-danger" data-dismiss="modal">Close</button>

                        <button class="btn btn-success mr5 pull-right" id="new-requisition-create" data-dismiss="modal">Submit for Approval</button>
                        <button class="btn btn-primary mr5 pull-right" id="new-requisition-save-draft">Save Draft</button>
                    </div><!-- panel-footer -->
                </div>
            </div>
        </div>
    </div>
</template>
