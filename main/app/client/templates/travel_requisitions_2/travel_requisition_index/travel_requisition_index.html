<template name="TravelRequisition2Index">
    <div class="pageheader">
        <div class="media">
            <div class="pageicon pull-left" style="padding: 9px;">
                <i class="fa fa-fax"></i>
            </div>
            <div class="media-body">
                <ul class="breadcrumb">
                    <li><a href=""><i class="glyphicon glyphicon-home"></i></a></li>
                    <li><a ui-sref="business.overview">Business</a></li>
                    <li>{{name}}</li>
                    <li>Travel Requests</li>
                </ul>

                <h4>Travel requests</h4>
            </div>
        </div><!-- media -->
    </div><!-- pageheader -->

    <div class="contentpanel">
        <div class="panel">
            <div class="panel-body">
                {{#unless Template.subscriptionsReady}}
                <div class="row">
                    <div class="col-sm-12">
                        {{> spinner}}
                    </div>
                </div>
                {{/unless}}
                <div class="row">
                    <div class="col-sm-12">
                            <span class="mb20 pull-right" id="createTravelRequisition">
                            <a class="btn btn-primary">New Travel Request</a>
                        </span>
                        <br/><br/>
                    </div>
                </div>
                {{#if condition travelRequestsICreated.count '>' 0}}
                <div class="row">
                    <div class="col-sm-12">
                        <table class="table table-striped table-bordered result" cellspacing="0" width="100%">
                            <thead>
                                <tr>
                                    <th>Creator</th>
                                    <th>Description</th>

                                    <th>Date created</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                    <!-- <th>&nbsp;</th> -->
                                </tr>
                            </thead>
                            <tbody>
                                {{#each travelRequestsICreated}}
                                <tr data-RequisitionId="{{_id}}" class="pointer requisitionRow">
                                    <td nowrap>{{getCreatedByFullName this}}</td>
                                    <td>{{description}}</td>

                                    {{#if createdAt}}
                                    <td nowrap>{{formatDate createdAt}}</td>
                                    {{else}}
                                    <td nowrap></td>
                                    {{/if}}
                                    <!-- <td id="status_{{_id}}">{{getStatus status this}}</td> -->
                                    <td id="status_{{_id}}">{{status}}</td>
                                    <td class="d-flex">
                                        <i data-RequisitionId="{{_id}}" class="fa fa-eye view-requisitionRow" aria-hidden="true" style="width: 100%;padding: 5px 0;"></i>
                                        <i data-RequisitionId="{{_id}}" class="fa fa-pencil edit-requisitionRow" aria-hidden="true" style="width: 100%;padding: 5px 0;"></i>
                                    </td>
                                </tr>
                                {{/each}}
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="row">
                    <div class="row">
                        <div class="pull-right">
                            <ul class="pagination pagination-split pagination-sm pagination-contact">
                                {{#each (repeat numberOfPages)}}
                                    {{#if condition currentPage 'eq' this}}
                                    <li class="active"><a class="goToPage" data-pageNum="{{this}}">{{this}}</a></li>
                                    {{else}}
                                    <li><a class="goToPage" data-pageNum="{{this}}">{{this}}</a></li>
                                    {{/if}}
                                {{/each}}
                            </ul>
                        </div>
                    </div>
                </div>
                {{else}}
                <div class="row">
                    <table class="table table-striped table-bordered result" cellspacing="0" width="100%">
                        <thead>
                            <tr>
                                <th>Creator</th>
                                <th>Description</th>

                                <th>Date created</th>
                                <th>Status</th>
                                <!--<th>&nbsp;</th>-->
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td nowrap colspan="6"><h5 class="text-muted"><i class="fa fa-exclamation-circle"></i>&nbsp;You have not yet made any travel request</h5></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                {{/if}}

            </div>
        </div>
    </div>
</template>
